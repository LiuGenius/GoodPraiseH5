<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1,
		maximum-scale=1, user-scalable=no">
		<meta charset="utf-8" />
		<link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css" />
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
		<script src="js/utils.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/urlAddress.js" type="text/javascript" charset="utf-8"></script>
		<!-- 生产环境版本，优化了尺寸和速度 -->
		<script src="https://cdn.jsdelivr.net/npm/vue"></script>
		<title></title>
		<style>
			ul,
			li {
				padding: 0;
				margin: 0;
				list-style: none
			}

			p,
			span {
				font-weight: 100;
			}
		</style>
	</head>
	<body style="background: #F7F7F7;">
		<div id="id_app">

			<ul id="id_list" style="margin: 2%;">
				<li style="color: #FFFFFF;margin: 1%;overflow: hidden;" v-for="(data,index) in datas ">
					<!-- <img src="img/季度卡.png" style="width: 100%;"/> -->
					<div :style="`padding: 3% 3% 0% 3%;background: url(img/${data.img}.png);background-size: 100% 100%;`">
						<span style="font-weight: bold;">{{data.name}}</span>
						<span style="position: absolute;right: 20px;">会员费: {{data.price}}元</span>
						<p style="margin-left: 20px;margin-top: 20px;">每天可做任务: {{data.task_count}}个</p>
						<p style="margin-left: 20px;margin-top: -4px;">{{data.description}}</p>
						<p style="margin-left: 20px;margin-top: -4px;">直接邀请同伴奖励: 20 %</p>
						<p @click="pay(data.name,data.price)" style="width: 100%;text-align: center;height: 40px;line-height: 40px;">立即升级</p>
					</div>
				</li>
			</ul>
		</div>
		<p style="height: 70px;"></p>

		<div style="position: fixed;bottom: 0px; z-index: 999;width: 100%;background: #FFFFFF;line-height: 20px;padding-top: 10px;">
			<div onclick="location.href='main.html'" style="width: 24%;display: inline-block;text-align: center;">
				<img style="width: 20px;" src="img/icon_tab_sy_1.png">
				<p style="margin-top: 4px;font-size: 12px;">首页</p>
			</div>
			<div onclick="location.href='task.html'" style="width: 24%;display: inline-block;text-align: center;">
				<img style="width: 20px;" src="img/icon_tab_rw_1.png">
				<p style="margin-top: 4px;font-size: 12px;">任务</p>
			</div>
			<div style="width: 24%;display: inline-block;text-align: center;">
				<img style="width: 20px;" src="img/icon_tab_gm_2.png">
				<p style="margin-top: 4px;font-size: 12px;color: #FF3159;">购买</p>
			</div>
			<div onclick="location.href='me.html'" style="width: 24%;display: inline-block;text-align: center;">
				<img style="width: 20px;" src="img/icon_tab_wd_1.png">
				<p style="margin-top: 4px;font-size: 12px;">我的</p>
			</div>
		</div>

	</body>
	<script>
		var app = new Vue({
			el: "#id_app",
			data: {
				datas: [],
				imgArrays : ["level_1", "level_2", "level_3"]
			},
			mounted(){
				this.getData();
			},
			methods: {
				pay: function(levelName, levelPrice) {
					location.href = decodeURI("updata.html?levelName=" + levelName + "&levelPrice=" + levelPrice);
				},
				Packge:function(ID, add_time, description, name, price, sort, status, task_count, type, img){
					var data = new Object();
					data.ID = ID;
					data.add_time = add_time;
					data.description = description;
					data.name = name;
					data.price = price;
					data.sort = sort;
					data.status = status;
					data.task_count = task_count;
					data.type = type;
					data.img = img;
					return data;
				},
				getData:function(){
					var that = this;
					ajax({
						method: 'POST',
						url: PACKAGE_LIST + "?access-token=" + localStorage.getItem('access-token'),
						success: function(obj) {
							if (obj.success) {
								for (var i = 0; i < obj.data.list.length; i++) {
									var packge = obj.data.list[i];
									that.datas.push(that.Packge(
										packge.ID,
										packge.add_time,
										packge.description,
										packge.name,
										StringToFloat(packge.price),
										packge.sort,
										packge.status,
										packge.task_count,
										packge.type,
										that.imgArrays[i % 3]
									));
								}
							} else {
								alert(obj.message)
							}
						}
					})
				}
			}
		});

		
	</script>
</html>
